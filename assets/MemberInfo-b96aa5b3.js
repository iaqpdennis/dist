import{E as ae,d as l,t as d,i as m,p as i,e as b,F as P,a4 as B,f as o,A as M,y as D,z as u,a1 as ge,a2 as be,a7 as xe,k as he,u as ke,a8 as Ve,a9 as Ce,r as p,l as Ne,aa as ze,c as U,m as Se,w as Te,b as Ae,ab as Me,q as Pe,h as r,s as A,v as c,x as f,I as X,ac as Y,G as ee,N as te,n as G,ad as Ie,J as Le,C as _,D as Ee,ae as qe,K as Ue,af as De}from"./index-2cc77167.js";import{u as Oe}from"./cms-db1ee242.js";const We={class:"mt-5 flex justify-end"},Fe={class:"ml-auto flex"},Be=o("div",{class:"flex h-[300px] flex-col items-center justify-center gap-4"},[o("img",{src:xe,alt:"Empty Illustration",class:"w-64"}),o("h2",{class:"text-base font-semibold text-slate-700"},"Page not found.")],-1),Ge={class:"ml-auto flex"},Re={class:"text-center text-base font-semibold text-slate-700"},He=["innerHTML"],je={class:"mt-5 flex justify-end"},Ze={__name:"CmsModal",props:{title:{type:String,default(){return""}},content:{type:String,default(){return""}},isLoading:{type:Boolean,default(){return!1}}},emits:["onClose"],setup(x,{emit:C}){return($,y)=>{const N=ae("Icon");return l(),d(be,{to:"body"},[m(ge,{size:"xl"},{default:i(()=>[x.isLoading?(l(),b(P,{key:0},[m(B,{class:"!h-8"}),m(B,{class:"mt-5 !h-[300px]"}),o("div",We,[m(B,{class:"!h-10 !w-24"})])],64)):!x.isLoading&&(x.title===""||x.content==="")?(l(),b(P,{key:1},[o("div",Fe,[o("button",{type:"button",onClick:y[0]||(y[0]=z=>C("onClose"))},[m(N,{icon:"heroicons-solid:x",class:"h-5 w-5 text-slate-600"})])]),Be],64)):(l(),b(P,{key:2},[o("div",Ge,[o("button",{type:"button",onClick:y[1]||(y[1]=z=>C("onClose"))},[m(N,{icon:"heroicons-solid:x",class:"h-5 w-5 text-slate-600"})])]),o("h2",Re,M(x.title),1),o("div",{class:"scrollbar-sm mt-5 h-[300px] space-y-2 overflow-y-auto px-2",innerHTML:x.content},null,8,He),o("div",je,[m(D,{onClick:y[2]||(y[2]=z=>C("onClose"))},{default:i(()=>[u("Close")]),_:1})])],64))]),_:1})])}}},Je=o("div",{class:"text-center"},[o("div",{class:"mt-12"},[o("h2",{class:"text-2xl font-semibold text-slate-600 dark:text-navy-100"}," Personal Information "),o("p",{class:"text-slate-400 dark:text-navy-200"}," Provide your personal information to create an account ")])],-1),Ke={class:"mt-10"},Qe=["onSubmit"],Xe={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},Ye={class:"w-full"},et={class:"w-full"},tt={class:"mt-4 grid grid-cols-1 gap-4 md:grid-cols-2"},at={class:"w-full"},st={class:"w-full"},ot={class:"mt-4 grid grid-cols-1 gap-4 md:grid-cols-2"},nt={class:"w-full"},rt=o("option",{value:"",disabled:""},"Select Country",-1),lt=["value"],it={class:"w-full"},dt=o("option",{value:"",disabled:""},"Select Timezone",-1),ut=["value"],mt={class:"mt-4"},ct={class:"mt-4"},pt={class:"mt-4"},ft={class:"mt-6 flex items-center gap-x-1"},vt=o("span",{class:"mt-0.5 text-xs"},"(optional)",-1),wt={class:"mt-3 flex items-center gap-x-2"},yt=o("span",null," and ",-1),_t=o("span",null,".",-1),$t={class:"mt-7 flex flex-wrap items-center gap-0.5"},gt={class:"mt-5 flex flex-col items-center justify-end gap-4 sm:flex-row"},ht={__name:"MemberInfo",setup(x){const C=Le(),$=he(),y=ke(),N=Ve(),z=Ce(),R=Oe(),I=p(null),O=p([]),W=p([]),{resetRecaptcha:se}=De(),H=p(null),L=p(!1),h=p(!1),S=p(!1),F=p(""),e=Ne({companyName:"",companyWebsite:"",firstName:"",lastName:"",country:"",timezone:"",email:"",password:{password:"",confirm:""},receiveNewsletter:0,termsAgreement:0,recaptcha:null}),k=p(!0),T=p(!0),E=p(!1),q=p(!1),j=p(null),Z=p(null);ze(E,".modal-overlay");const oe=U(()=>O.value.map(t=>({value:t.id,text:t.name}))),J=U(()=>{for(const t of W.value){let a=parseFloat(t.hour_offset),v=Math.abs(a),w=Math.floor(v),g=(v%w||0)*60;const s=w>=10?w:`0${w}`,V=g>=10?g:`0${Math.floor(g)}`;a<0?t.text=`${t.name} GMT-${s}:${V}`:a>0?t.text=`${t.name} GMT+${s}:${V}`:t.text=`${t.name} GMT${s}:${V}`}return W.value.map(t=>({id:t.id,value:t.id,text:t.text}))}),ne=U(()=>({company_name:e.companyName,company_website:e.companyWebsite,first_name:e.firstName,last_name:e.lastName,email:e.email,password:{password:$.encryptData(e.password.password),password_confirmation:$.encryptData(e.password.confirm)},receive_newsletter:e.receiveNewsletter,terms_agreement:e.termsAgreement})),re=U(()=>({companyName:{required:_},firstName:{required:_},country:{required:_},timezone:{required:_},lastName:{required:_},email:{required:_,email:Ee},password:{password:{required:_,minLength:qe(8),containsUppercase:function(t){return/[A-Z]/.test(t)},containsLowercase:function(t){return/[a-z]/.test(t)},containsNumber:function(t){return/[0-9]/.test(t)},containsSpecial:function(t){return/[#?!@$%^&*-]/.test(t)}},confirm:{required:_,sameAs:Ue(e.password.password)}},recaptcha:{required:_}})),n=Se(re,e);Te(()=>e.termsAgreement,t=>{Q(t)}),Ae(async()=>{await le(),await ie(),de(),ue()}),Me(()=>{n.value.$reset(),e.recaptcha=""});async function le(){try{await N.getCountries(),O.value=N.countries}catch({message:t}){$notification({text:t,variant:"error",position:"center-top",duration:5e3})}}async function ie(){try{await z.getTimezones(),W.value=z.timezones}catch({message:t}){$notification({text:t,variant:"error",position:"center-top",duration:5e3})}}async function K(t){try{I.value=null,q.value=!0,E.value=!0,await R.getCustomPage(t),I.value=R.page,q.value=!1}catch({message:a}){q.value=!1}}function de(){const{company_name:t="",company_website:a="",first_name:v="",last_name:w="",email:g="",password:{password:s=null,password_confirmation:V=null}={},receive_newsletter:_e="",terms_agreement:$e=0}=$.newMember.personalInfo||{};e.companyName=t,e.companyWebsite=a,e.firstName=v,e.lastName=w,e.country=$.newMember.country_id||"",e.timezone=$.newMember.timezone_id||"",e.email=g,e.password.password=s?$.decryptData(s):"",e.password.confirm=V?$.decryptData(V):"",e.receiveNewsletter=_e,e.termsAgreement=$e}function ue(){var v,w;const t=(v=j.value)==null?void 0:v.tom;t.addOption(oe.value),t.addItem(e.country);const a=(w=Z.value)==null?void 0:w.tom;a.addOption(J.value),a.addItem(e.timezone)}function me(t){e.recaptcha=t}function ce(){L.value=!0}function pe(){L.value=!0}function fe(){L.value=!1,se(H.value)}function Q(t){t==0?k.value=!1:k.value=!0}function ve(){if(e.companyWebsite==""){T.value=!0;return}const t=/^(http:\/\/|https:\/\/|www\.)?[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}(?:\/\S*)?$/;T.value=t.test(e.companyWebsite)}async function we(){ve();const t=await n.value.$validate();if(Q(e.termsAgreement),!(!t||!k.value||!T.value))try{h.value=!0,S.value=!1,await y.validateEmail({email:e.email}),ye(),y.setNewMember({personalInfo:ne.value,country_id:e.country,timezone_id:e.timezone}),C.replace("/register/payment"),h.value=!1}catch({errors:a,message:v}){h.value=!1,a&&a.email&&(S.value=!0,F.value=v,setTimeout(()=>{S.value=!1,F.value=""},5e3))}}async function ye(){try{await y.sendGuestEmailOtp({email:e.email})}catch({message:t}){$notification({text:t,variant:"error",position:"center-top",duration:5e3})}}return(t,a)=>{var w,g;const v=ae("Icon");return l(),b("div",null,[Je,o("div",Ke,[o("form",{onSubmit:Pe(we,["prevent"])},[o("div",Xe,[o("div",Ye,[m(A,{modelValue:e.companyName,"onUpdate:modelValue":a[0]||(a[0]=s=>e.companyName=s),label:"Company name","is-invalid":r(n).companyName.$error},null,8,["modelValue","is-invalid"]),r(n).companyName.$error?(l(),d(c,{key:0},{default:i(()=>[u("Company name is required.")]),_:1})):f("",!0)]),o("div",et,[m(A,{modelValue:e.companyWebsite,"onUpdate:modelValue":a[1]||(a[1]=s=>e.companyWebsite=s),label:"Company website (optional)","is-invalid":!T.value},null,8,["modelValue","is-invalid"]),T.value?f("",!0):(l(),d(c,{key:0},{default:i(()=>[u(" Please use proper company website url. ")]),_:1}))])]),o("div",tt,[o("div",at,[m(A,{modelValue:e.firstName,"onUpdate:modelValue":a[2]||(a[2]=s=>e.firstName=s),label:"First name","is-invalid":r(n).firstName.$error},null,8,["modelValue","is-invalid"]),r(n).firstName.$error?(l(),d(c,{key:0},{default:i(()=>[u("First name is required.")]),_:1})):f("",!0)]),o("div",st,[m(A,{modelValue:e.lastName,"onUpdate:modelValue":a[3]||(a[3]=s=>e.lastName=s),label:"Last name","is-invalid":r(n).lastName.$error},null,8,["modelValue","is-invalid"]),r(n).lastName.$error?(l(),d(c,{key:0},{default:i(()=>[u("Last name is required.")]),_:1})):f("",!0)])]),o("div",ot,[o("div",nt,[m(Y,{ref_key:"countryDropdown",ref:j,modelValue:e.country,"onUpdate:modelValue":a[4]||(a[4]=s=>e.country=s),"input-id":"country-dropdown",label:"Country","is-invalid":r(n).country.$error},{default:i(()=>[rt,(l(!0),b(P,null,X(O.value,s=>(l(),b("option",{key:s,value:s.id},M(s.name),9,lt))),128))]),_:1},8,["modelValue","is-invalid"]),r(n).country.$error?(l(),d(c,{key:0},{default:i(()=>[u("Country is required.")]),_:1})):f("",!0)]),o("div",it,[m(Y,{ref_key:"timezoneDropdown",ref:Z,modelValue:e.timezone,"onUpdate:modelValue":a[5]||(a[5]=s=>e.timezone=s),"input-id":"timezone-dropdown",label:"Timezone","is-invalid":r(n).timezone.$error},{default:i(()=>[dt,(l(!0),b(P,null,X(r(J),s=>(l(),b("option",{key:s.id,value:s.id},M(s.text),9,ut))),128))]),_:1},8,["modelValue","is-invalid"]),r(n).timezone.$error?(l(),d(c,{key:0},{default:i(()=>[u("Timezone is required.")]),_:1})):f("",!0)])]),o("div",mt,[m(A,{modelValue:e.email,"onUpdate:modelValue":a[6]||(a[6]=s=>e.email=s),label:"Email address",type:"email","is-invalid":r(n).email.$error||S.value},null,8,["modelValue","is-invalid"]),r(n).email.$error&&r(n).email.required.$invalid?(l(),d(c,{key:0},{default:i(()=>[u(" Email address is required. ")]),_:1})):r(n).email.$error&&r(n).email.email.$invalid?(l(),d(c,{key:1},{default:i(()=>[u(" Email address is not valid. ")]),_:1})):S.value?(l(),d(c,{key:2},{default:i(()=>[u(M(F.value),1)]),_:1})):f("",!0)]),o("div",ct,[m(ee,{modelValue:e.password.password,"onUpdate:modelValue":a[7]||(a[7]=s=>e.password.password=s),label:"Password","is-invalid":r(n).password.password.$error},null,8,["modelValue","is-invalid"]),r(n).password.password.$error&&r(n).password.password.required.$invalid?(l(),d(c,{key:0},{default:i(()=>[u(" Password is required. ")]),_:1})):r(n).password.password.$error&&r(n).password.password.minLength.$invalid?(l(),d(c,{key:1},{default:i(()=>[u(" Password must be at least 8 characters. ")]),_:1})):r(n).password.password.$error&&r(n).password.password.containsUppercase.$invalid?(l(),d(c,{key:2},{default:i(()=>[u(" Password must contain at least 1 uppercase. ")]),_:1})):r(n).password.password.$error&&r(n).password.password.containsLowercase.$invalid?(l(),d(c,{key:3},{default:i(()=>[u(" Password must contain at least 1 lowercase. ")]),_:1})):r(n).password.password.$error&&r(n).password.password.containsNumber.$invalid?(l(),d(c,{key:4},{default:i(()=>[u(" Password must contain at least 1 number. ")]),_:1})):r(n).password.password.$error&&r(n).password.password.containsSpecial.$invalid?(l(),d(c,{key:5},{default:i(()=>[u(" Password must contain at least 1 special character. ")]),_:1})):f("",!0)]),o("div",pt,[m(ee,{modelValue:e.password.confirm,"onUpdate:modelValue":a[8]||(a[8]=s=>e.password.confirm=s),label:"Confirm Password","is-invalid":r(n).password.confirm.$error},null,8,["modelValue","is-invalid"]),r(n).password.confirm.$error&&r(n).password.confirm.required.$invalid?(l(),d(c,{key:0},{default:i(()=>[u(" Confirm password is required. ")]),_:1})):r(n).password.confirm.$error&&r(n).password.confirm.sameAs.$invalid?(l(),d(c,{key:1},{default:i(()=>[u(" Password does not match. ")]),_:1})):f("",!0)]),o("div",ft,[m(te,{modelValue:e.receiveNewsletter,"onUpdate:modelValue":a[9]||(a[9]=s=>e.receiveNewsletter=s),mode:"primary",label:"Subscribe to our newsletter"},null,8,["modelValue"]),vt]),o("div",wt,[m(te,{modelValue:e.termsAgreement,"onUpdate:modelValue":a[10]||(a[10]=s=>e.termsAgreement=s),mode:"primary","is-invalid":!k.value},null,8,["modelValue","is-invalid"]),o("p",{class:G({"text-error":!k.value})},[u(" I agree to the "),o("button",{type:"button",class:G(["underline hover:text-success-focus",[k.value?"text-success":"text-error"]]),onClick:a[11]||(a[11]=s=>K("terms-and-conditions"))}," terms and conditions ",2),yt,o("button",{type:"button",class:G(["underline hover:text-success-focus",[k.value?"text-success":"text-error"]]),onClick:a[12]||(a[12]=s=>K("privacy-policy"))}," privacy policy ",2),_t],2)]),o("div",$t,[o("div",null,[m(r(Ie),{onWidgetId:a[13]||(a[13]=s=>H.value=s),onVerify:a[14]||(a[14]=s=>me(s)),onExpired:ce,onFail:pe}),r(n).recaptcha.$error?(l(),d(c,{key:0},{default:i(()=>[u(" Please verify you are a human. ")]),_:1})):f("",!0)]),L.value?(l(),d(D,{key:0,mode:"flat-default",size:"sm",class:"w-full sm:w-auto",onClick:fe},{default:i(()=>[m(v,{icon:"material-symbols:refresh",class:"mr-0.5 h-3.5 w-3.5"}),u(" Reload Captcha ")]),_:1})):f("",!0)]),o("div",gt,[m(D,{mode:"outline-default","is-link":"",link:"/register/plan",class:"order-2 w-full sm:order-1 sm:w-auto",disabled:h.value},{default:i(()=>[u(" Back ")]),_:1},8,["disabled"]),m(D,{type:"submit",class:"order-1 w-full sm:order-2 sm:w-auto",mode:"primary",disabled:h.value},{default:i(()=>[h.value?(l(),d(v,{key:0,icon:"gg:spinner",class:"animate-spin text-base"})):f("",!0),o("span",null,M(h.value?"Loading...":"Next"),1)]),_:1},8,["disabled"])])],40,Qe)]),E.value?(l(),d(Ze,{key:0,title:(w=I.value)==null?void 0:w.title,content:(g=I.value)==null?void 0:g.content,"is-loading":q.value,onOnClose:a[15]||(a[15]=s=>E.value=!1)},null,8,["title","content","is-loading"])):f("",!0)])}}};export{ht as default};
